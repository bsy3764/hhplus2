# 소프트웨어 아키텍처
- 소프트웨어 구성요소들 사이 관계를 표현
- 클린 아키텍처에서는 의존성 역전을 통해서 프로젝트 전체가 DB가 아닌 도메인에 의존하게 하는 방법으로 상위계층이 하위계층을 의존하는 문제를 해결
>아키텍처
: 어떤 대상의 구성과 동작 원리 , 구성 요소간의 관계 및 시스템 외부 환경과의 관계를 설명하는 하나의 설명서

[아키텍처 참고 사이트 1]()

### 아키텍처 적용
0. 요구사항 확인 및 정책 설정
---
1️⃣ **(핵심)** 특강 신청 **API**

- 특정 userId 로 선착순으로 제공되는 특강을 신청하는 API 를 작성합니다.
- 동일한 신청자는 동일한 강의에 대해서 한 번의 수강 신청만 성공할 수 있습니다.
- 특강은 선착순 30명만 신청 가능합니다.
- 이미 신청자가 30명이 초과 되면 이후 신청자는 요청을 실패합니다.

&rarr; 동일한 강의는 Lecture Id가 같은것에만 적용(제목, 강사, 강의 날짜가 같아도 Lecture Id가 다르면 다른 강의로 취급)

&rarr; 강의 신청시 강의 ID를 입력하거나, 제목 + 강사 + 강의 날짜를 입력하기


**2️⃣ 특강 신청 가능 목록 API**

- 날짜별로 현재 신청 가능한 특강 목록을 조회하는 API 를 작성합니다.
- 특강의 정원은 30명으로 고정이며, 사용자는 각 특강에 신청하기 전 목록을 조회해 볼 수 있어야 합니다.

&rarr; 기본적 신청 가능 목록을 출력할 때는 '현재 시점'부터 6개월까지의 강의 출력

&rarr; 날짜를 1개만 작성하면 '해당 시점(해당 날짜 + 해당 시간)' 이후의 날짜만 출력 + '해당 시점'에서 최대 6개월 앞의 강의만 출력해 줌

&rarr;&rarr; '해당 시점'은 '현재 시점'으로 해서 전후 7일간만 선택 가능

&rarr; 날짜를 2개를 작성하면 그 범위(from과 to의 최대 범위는 12개월)의 강의들은 모두 출력(이미 지난 것도 강의 상태 Close로 출력함)

&rarr;&rarr; from은 '현재 시점'으로 해서 전후 1개월만 선택 가능

&rarr; 정원이 이미 찬 강의도 출력함(강의 상태 Close로)

3️⃣  **특강 신청 완료 목록 조회 API**

- 특정 userId 로 신청 완료된 특강 목록을 조회하는 API 를 작성합니다.
- 각 항목은 특강 ID 및 이름, 강연자 정보를 담고 있어야 합니다.

&rarr; 신청 완료된 목록은 기본적으로 예약상태가 SUCCESS인 것만 출력

&rarr; 날짜를 1개만 작성하면 '해당 시점(해당 날짜 + 해당 시간)' 이후의 날짜만 출력 + '해당 시점'에서 최대 6개월 앞의 예약된 내역만 출력해 줌

&rarr; 날짜를 2개를 작성하면 그 범위(from과 to의 최대 범위는 12개월)의 예약들은 모두 출력(이미 지난 것도 강의 상태 Close로, 예약상태는 그대로 출력함)

---
1. 도메인 모델 구현
- 특강(강의) 모델
  - 강의 ID
  - 강의 제목
  - 강사명
  - 강의날짜
  - 강의 가격
  - 강의에 신청한 학생수(Max 30)
  - 강의 상태(신청 가능 - OPEN, 신청 불가 - CLOSE)
- 예약 모델
  - 예약 ID
  - 예약한 학생 ID
  - 예약된 강의 ID
  - 예약한 날짜
  - 예약 상태(예약 성공 - SUCCESS, 예약 실패 - FAIL)
2. 비즈니스 로직을 처리하기 위한 어플리케이션 계층의 입출력 경계에 위치할 인터페이스 구현
- UseCase or Input/Output Port 만들기??????
  3.어플리케이션 계층으로의 입출력 명세를 작성하고 나면 해당 명세를 따르는 상세 비즈니스 로직을 구현
- LectureService, ReservationService 인터페이스 구현
4.  OutPort 명세를 따르는 Adapter를 구현할 수 있고, 어떤 Database 혹은 ORM을 이용할지에 대한 추가적인 고민

5. 마지막으로 사용자로부터 요청을 받아서 유스케이스를 호출할 Input Adapter에 대한 구현과 어플리케이션을 구성하는 프레임워크나 라이브러리에 대한 고민

---
- 단위 테스트부터 작성한거 같지만 나중에 보니 통합 테스트를 작성한거 같음...
  - 5e3094436d074b511975c022ef816722483ae094
  - 75607c0ef6721954ec2a41dcb8dd15ddd3605bfb
- JPA 메서드명 작성
  - 07f51d97c4879b4f5e39675fcdd1ff64828537b1
- 패키지 구조 변경 및 테스트 성공하기 시작...
  - 75607c0ef6721954ec2a41dcb8dd15ddd3605bfb
- api 호출 및 서비스 로직
  - 54525b851c743ffe300a260db6ab42b99a9fe95e
  - 646ed2025a5beec92c53ed8acf07a28e24535a13